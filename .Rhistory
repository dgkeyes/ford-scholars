set_names(c("FICB",
"Community Economic Development",
"Children, Youth, and Families",
"Postsecondary Success",
"Visual Arts")) %>%
gather(key = "item", value = "response") %>%
mutate(response = ifelse(response == "Fairly aware" |
response == "I know this work well",
"Y", "N")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
filter(!is.na(response)) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y") %>%
mutate(group = "All respondents")
}
dk_summarize_awareness_depts_single() %>%
dk_plot_awareness_depts()
library(bookdown)
# V1 ----------------------------------------------------------------------
# gitbook(split_by = "section+number",
#         number_sections = TRUE)
#
# render_book("overview.Rmd",
#             "bookdown::gitbook",
#             output_dir = "report_overview",
#             clean = TRUE)
# V2 ----------------------------------------------------------------------
gitbook(split_by = "section+number",
number_sections = TRUE)
render_book("subgroups.Rmd",
"bookdown::gitbook",
output_dir = "subgroups",
clean = TRUE)
dk_summarize_communications_single <- function() {
data %>%
select(contains("which_communications")) %>%
set_names(c("Quarterly e-newsletter",
"Annual alumni magazine",
"Emails",
"Social media posts",
"None")) %>%
gather(key = "item", value = "response") %>%
mutate(response = str_replace_na(response, "No")) %>%
mutate(response = ifelse(response == "No", "No", "Yes")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
filter(!is.na(response)) %>%
mutate(pct = round(prop.table(n), digits = 2)) %>%
ungroup() %>%
mutate(item = factor(item, levels = rev(c("Quarterly e-newsletter",
"Annual alumni magazine",
"Emails",
"Social media posts",
"None")))) %>%
filter(response == "Yes") %>%
mutate(group = "All respondents")
}
dk_summarize_communications_single() %>%
dk_plot_communications()
dk_summarize_communications_multiple <- function(group_col) {
data %>%
select(contains("which_communications"),
!!rlang::ensym(group_col)) %>%
set_names(c("Quarterly e-newsletter",
"Annual alumni magazine",
"Emails",
"Social media posts",
"None",
"group")) %>%
gather(key = "item", value = "response", -group) %>%
mutate(response = str_replace_na(response, "No")) %>%
mutate(response = ifelse(response == "No", "No", "Yes")) %>%
group_by(item, group) %>%
count(response) %>%
filter(!is.na(response)) %>%
mutate(pct = round(prop.table(n), digits = 2)) %>%
ungroup() %>%
mutate(item = factor(item, levels = rev(c("Quarterly e-newsletter",
"Annual alumni magazine",
"Emails",
"Social media posts",
"None")))) %>%
filter(response == "Yes")
}
dk_summarize_communications_multiple(lives_in_oregon) %>%
dk_plot_communications()
dk_summarize_participate_opportunities_multiple <- function(group_col) {
data %>%
select(contains("how_likely_would_you_be_to_participate_in_the_following_types_of_opportunities"),
!!rlang::ensym(group_col)) %>%
set_names(c("Scholarship outreach at high schools or community colleges",
"Mentoring current scholars or alumni",
"Local community service projects",
"A regional alumni association event",
"Alumni association committee or board service",
"Professional leadership development training for alumni",
"Connect with alumni through private online portal for professional networking",
"group")) %>%
gather(key = "item", value = "response", -group) %>%
mutate(response = ifelse(response == "Likely" |
response == "Very likely",
"Y", "N")) %>%
group_by(item, response, group) %>%
summarize(n = n()) %>%
group_by(group, item) %>%
filter(!is.na(response)) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y") %>%
ungroup() %>%
mutate(item = str_wrap(item, 40))
}
dk_summarize_participate_opportunities_single <- function() {
data %>%
select(contains("how_likely_would_you_be_to_participate_in_the_following_types_of_opportunities")) %>%
set_names(c("Scholarship outreach at high schools or community colleges",
"Mentoring current scholars or alumni",
"Local community service projects",
"A regional alumni association event",
"Alumni association committee or board service",
"Professional leadership development training for alumni",
"Connect with alumni through private online portal for professional networking")) %>%
gather(key = "item", value = "response") %>%
mutate(response = ifelse(response == "Likely" |
response == "Very likely",
"Y", "N")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
filter(!is.na(response)) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y") %>%
ungroup() %>%
mutate(item = str_wrap(item, 40)) %>%
mutate(group = "All respondents")
}
dk_summarize_participate_opportunities_single() %>%
dk_plot_participate_opportunities
dk_summarize_participate_opportunities_multiple(lives_in_oregon) %>%
dk_plot_participate_opportunities()
dk_summarize_participated_multiple <- function(group_col) {
data %>%
select(contains("have_you_participated"),
!!rlang::ensym(group_col)) %>%
set_names(c("1-2 events",
"3+ events",
"Board/committee service",
"Never attended",
"group")) %>%
gather(key = "item", value = "response", -group) %>%
mutate(response = if_else(is.na(response),
"No",
"Yes")) %>%
group_by(item, response, group) %>%
summarize(n = n()) %>%
group_by(item, group) %>%
filter(!is.na(response)) %>%
mutate(pct = round(prop.table(n), digits = 2)) %>%
filter(response == "Yes")
}
dk_summarize_participated_multiple(lives_in_oregon) %>%
dk_plot_participated()
dk_summarize_participated_single <- function() {
data %>%
select(contains("have_you_participated")) %>%
set_names(c("1-2 events",
"3+ events",
"Board/committee service",
"Never attended")) %>%
gather(key = "item", value = "response") %>%
filter(!is.na(response)) %>%
mutate(response = if_else(is.na(response),
"No",
"Yes")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
mutate(pct = round(prop.table(n), digits = 2)) %>%
filter(response == "Yes") %>%
mutate(group = "All respondents")
}
dk_summarize_participated_multiple <- function(group_col) {
data %>%
select(contains("have_you_participated"),
!!rlang::ensym(group_col)) %>%
set_names(c("1-2 events",
"3+ events",
"Board/committee service",
"Never attended",
"group")) %>%
gather(key = "item", value = "response", -group) %>%
filter(!is.na(response)) %>%
mutate(response = if_else(is.na(response),
"No",
"Yes")) %>%
group_by(item, response, group) %>%
summarize(n = n()) %>%
group_by(item, group) %>%
mutate(pct = round(prop.table(n), digits = 2)) %>%
filter(response == "Yes")
}
dk_plot_participated <- function(.data) {
ggplot(.data,
aes(x = item,
y = pct)) +
geom_col(fill = tfff.dark.green) +
geom_text(aes(label = percent(pct)),
hjust = -.35,
color = tfff.dark.green) +
coord_flip() +
dk_theme +
theme(axis.title = element_blank()) +
scale_y_continuous(limits = c(0, 1),
labels = percent) +
facet_wrap(~group, ncol = 2)
}
dk_summarize_participated_single() %>%
dk_plot_participated
dk_summarize_participated_multiple(lives_in_oregon) %>%
dk_plot_participated()
dk_summarize_participated_single <- function() {
data %>%
select(contains("have_you_participated")) %>%
set_names(c("1-2 events",
"3+ events",
"Board/committee service",
"Never attended")) %>%
gather(key = "item", value = "response") %>%
mutate(response = if_else(is.na(response),
"No",
"Yes")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
mutate(pct = round(prop.table(n), digits = 2)) %>%
filter(response == "Yes") %>%
mutate(group = "All respondents")
}
dk_summarize_participated_multiple <- function(group_col) {
data %>%
select(contains("have_you_participated"),
!!rlang::ensym(group_col)) %>%
set_names(c("1-2 events",
"3+ events",
"Board/committee service",
"Never attended",
"group")) %>%
gather(key = "item", value = "response", -group) %>%
mutate(response = if_else(is.na(response),
"No",
"Yes")) %>%
group_by(item, response, group) %>%
summarize(n = n()) %>%
group_by(item, group) %>%
mutate(pct = round(prop.table(n), digits = 2)) %>%
filter(response == "Yes")
}
dk_plot_participated <- function(.data) {
ggplot(.data,
aes(x = item,
y = pct)) +
geom_col(fill = tfff.dark.green) +
geom_text(aes(label = percent(pct)),
hjust = -.35,
color = tfff.dark.green) +
coord_flip() +
dk_theme +
theme(axis.title = element_blank()) +
scale_y_continuous(limits = c(0, 1),
labels = percent) +
facet_wrap(~group, ncol = 2)
}
dk_summarize_participated_single() %>%
dk_plot_participated
dk_summarize_participated_multiple(lives_in_oregon) %>%
dk_plot_participated()
data %>%
select(how_interested_are_you_in_engaging_with_the_alumni_association) %>%
gather(key = "item", value = "response") %>%
mutate(response = ifelse(response == "Somewhat interested" |
response == "Very interested",
"Y", "N")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y") %>%
mutate(group = "All respondents")
data %>%
select(how_interested_are_you_in_engaging_with_the_alumni_association) %>%
gather(key = "item", value = "response")
data %>%
select(how_interested_are_you_in_engaging_with_the_alumni_association) %>%
gather(key = "item", value = "response") %>%
mutate(response = ifelse(response == "Somewhat interested" |
response == "Very interested",
"Y", "N")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y") %>%
mutate(group = "All respondents")
data %>%
select(how_interested_are_you_in_engaging_with_the_alumni_association) %>%
gather(key = "item", value = "response") %>%
filter(!is.na(response)) %>%
mutate(response = ifelse(response == "Somewhat interested" |
response == "Very interested",
"Y", "N")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y") %>%
mutate(group = "All respondents")
dk_summarize_engaging_alum_single <- function() {
data %>%
select(how_interested_are_you_in_engaging_with_the_alumni_association) %>%
gather(key = "item", value = "response") %>%
filter(!is.na(response)) %>%
mutate(response = ifelse(response == "Somewhat interested" |
response == "Very interested",
"Y", "N")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y") %>%
mutate(group = "All respondents")
}
dk_summarize_engaging_alum_multiple <- function(group_col) {
data %>%
select(how_interested_are_you_in_engaging_with_the_alumni_association,
!!rlang::ensym(group_col)) %>%
set_names(c("item", "group")) %>%
gather(key = "item", value = "response", -group) %>%
filter(!is.na(response)) %>%
mutate(response = ifelse(response == "Somewhat interested" |
response == "Very interested",
"Y", "N")) %>%
group_by(group, response) %>%
summarize(n = n()) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(!is.na(response)) %>%
filter(response == "Y")
}
dk_plot_engaging_alum <- function(.data) {
ggplot(.data, aes(x = group,
y = pct)) +
geom_col(fill = tfff.dark.green) +
geom_text(aes(label = percent(pct)),
hjust = -.35,
color = tfff.dark.green) +
coord_flip() +
dk_theme +
theme(axis.title = element_blank()) +
scale_y_continuous(labels = percent,
limits = c(0, 1))
}
dk_summarize_engaging_alum_single() %>%
dk_plot_engaging_alum()
dk_summarize_engaging_alum_multiple(lives_in_oregon) %>%
dk_plot_engaging_alum()
dk_summarize_engaging_alum_single() %>%
dk_plot_engaging_alum()
dk_summarize_engaging_alum_multiple(rural_or_not) %>%
dk_plot_engaging_alum()
dk_summarize_engaging_alum_multiple(years_since_grad_grouped) %>%
dk_plot_engaging_alum()
dk_summarize_engaging_tfff_single <- function() {
data %>%
select(how_interested_are_you_in_being_engaged_with_the_ford_family_foundation) %>%
gather(key = "item", value = "response") %>%
filter(!is.na(response)) %>%
mutate(response = ifelse(response == "Somewhat interested" |
response == "Very interested",
"Y", "N")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
filter(!is.na(response)) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y") %>%
mutate(group = "All respondents")
}
dk_summarize_engaging_tfff_single() %>%
dk_plot_engaging_tfff()
dk_summarize_engaging_tfff_multiple <- function(group_col) {
data %>%
select(how_interested_are_you_in_being_engaged_with_the_ford_family_foundation,
!!rlang::ensym(group_col)) %>%
set_names(c("item", "group")) %>%
gather(key = "item", value = "response", -group) %>%
filter(!is.na(response)) %>%
mutate(response = ifelse(response == "Somewhat interested" |
response == "Very interested",
"Y", "N")) %>%
group_by(group, response) %>%
summarize(n = n()) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y")
}
dk_plot_engaging_tfff <- function(.data) {
ggplot(.data, aes(x = group,
y = pct)) +
geom_col(fill = tfff.dark.green) +
geom_text(aes(label = percent(pct)),
hjust = -.35,
color = tfff.dark.green) +
coord_flip() +
dk_theme +
theme(axis.title = element_blank()) +
scale_y_continuous(labels = percent,
limits = c(0, 1))
}
dk_summarize_engaging_tfff_multiple(lives_in_oregon) %>%
dk_plot_engaging_tfff()
dk_summarize_engaging_tfff_single() %>%
dk_plot_engaging_tfff()
dk_summarize_engaging_tfff_multiple(rural_or_not) %>%
dk_plot_engaging_tfff()
dk_summarize_engaging_tfff_multiple(years_since_grad_grouped) %>%
dk_plot_engaging_tfff()
dk_summarize_awareness_depts_single <- function() {
data %>%
select(contains("how_aware_are_you_about")) %>%
set_names(c("FICB",
"Community Economic Development",
"Children, Youth, and Families",
"Postsecondary Success",
"Visual Arts")) %>%
gather(key = "item", value = "response") %>%
filter(!is.na(response)) %>%
mutate(response = ifelse(response == "Fairly aware" |
response == "I know this work well",
"Y", "N")) %>%
group_by(item, response) %>%
summarize(n = n()) %>%
mutate(pct = round(prop.table(n), 2)) %>%
filter(response == "Y") %>%
mutate(group = "All respondents")
}
dk_summarize_awareness_depts_multiple <- function(group_col) {
data %>%
select(contains("how_aware_are_you_about"),
!!rlang::ensym(group_col)) %>%
set_names(c("FICB",
"Community Economic Development",
"Children, Youth, and Families",
"Postsecondary Success",
"Visual Arts",
"group")) %>%
gather(key = "item", value = "response", -group) %>%
filter(!is.na(response)) %>%
mutate(response = ifelse(response == "Fairly aware" |
response == "I know this work well",
"Y", "N")) %>%
group_by(response, group, item) %>%
summarize(n = n()) %>%
ungroup() %>%
group_by(group, item) %>%
filter(!is.na(response)) %>%
mutate(pct = round(prop.table(n), 2)) %>%
arrange(group, item, response) %>%
filter(response == "Y")
}
dk_plot_awareness_depts <- function(.data) {
ggplot(.data, aes(x = item,
y = pct)) +
geom_col(fill = tfff.dark.green) +
geom_text(aes(label = percent(pct)),
hjust = -.35,
color = tfff.dark.green) +
coord_flip() +
dk_theme +
theme(axis.title = element_blank()) +
scale_y_continuous(limits = c(0, 1),
labels = percent) +
theme(panel.grid.minor = element_blank()) +
facet_wrap(~group, ncol = 2)
}
dk_summarize_awareness_depts_single() %>%
dk_plot_awareness_depts()
dk_summarize_awareness_depts_multiple(lives_in_oregon) %>%
dk_plot_awareness_depts()
dk_summarize_awareness_depts_multiple(rural_or_not) %>%
dk_plot_awareness_depts()
library(bookdown)
# V1 ----------------------------------------------------------------------
# gitbook(split_by = "section+number",
#         number_sections = TRUE)
#
# render_book("overview.Rmd",
#             "bookdown::gitbook",
#             output_dir = "report_overview",
#             clean = TRUE)
# V2 ----------------------------------------------------------------------
gitbook(split_by = "section+number",
number_sections = TRUE)
render_book("subgroups.Rmd",
"bookdown::gitbook",
output_dir = "subgroups",
clean = TRUE)
library(bookdown)
# V1 ----------------------------------------------------------------------
# gitbook(split_by = "section+number",
#         number_sections = TRUE)
#
# render_book("overview.Rmd",
#             "bookdown::gitbook",
#             output_dir = "report_overview",
#             clean = TRUE)
# V2 ----------------------------------------------------------------------
gitbook(split_by = "section+number",
number_sections = TRUE)
render_book("subgroups.Rmd",
"bookdown::gitbook",
output_dir = "subgroups",
clean = TRUE)
